syntax = "proto3";

package report;

service ReportService {
  rpc GetParticipantsByEvent (GetParticipantsByEventRequest) returns (ParticipantsResponse) {}
  rpc GetEventParticipationStats (GetEventParticipationStatsRequest) returns (EventParticipationStatsResponse) {}
  rpc GetMonthlyParticipationStats (GetMonthlyParticipationStatsRequest) returns (MonthlyParticipationStatsResponse) {}
  rpc GetAverageParticipationTime (GetEventRequest) returns (AverageParticipationTimeResponse) {}
  rpc GetCheckInOutTimeAnalysis (GetEventRequest) returns (CheckInOutTimeAnalysisResponse) {}
  rpc GetParticipationRate (GetEventRequest) returns (ParticipationRateResponse) {}
}

message GetEventRequest {
  string eventId = 1;
}

message GetParticipantsByEventRequest {
  string eventId = 1;
}

message Participant {
  string id = 1;
  string eventId = 2;
  string userId = 3;
  string email = 4;
  string name = 5;
  string checkInAt = 6;
  string checkOutAt = 7;
}

message ParticipantsResponse {
  repeated Participant participants = 1;
}

message GetEventParticipationStatsRequest {
  string eventId = 1;
}

message EventParticipationStatsResponse {
  string eventId = 1;
  int32 registeredCount = 2;
  int32 checkInCount = 3;
  int32 checkOutCount = 4;
}

message GetMonthlyParticipationStatsRequest {
  int32 year = 1; // Lấy tham số năm
}

message MonthlyParticipationStatsResponse {
  repeated MonthlyParticipationStat monthlyStats = 1;
}

message MonthlyParticipationStat {
  int32 month = 1;
  int32 participantCount = 2;
}

message AverageParticipationTimeResponse {
  double averageParticipationTimeInMinutes = 1;
}

message CheckInOutTimeAnalysisResponse {
  double averageCheckInTimeInMinutes = 1; // Thời gian check-in trung bình (phút)
  double averageCheckOutTimeInMinutes = 2; // Thời gian check-out trung bình (phút)
}

message ParticipationRateResponse {
  double checkInRate = 1;
  double checkOutRate = 2;
}